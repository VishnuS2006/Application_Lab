<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complex Number Quiz - LearnMate</title>
    <link rel="stylesheet" href="Style1.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer">
</head>
<style>
.container {
    display: flex;
    flex-wrap: wrap;
}
.column {
    flex: 1;
    padding: 10px;
    box-sizing: border-box;
}
@media (max-width: 600px) {
    .column {
        flex: 100%;
    }
}

/* Enhanced CSS for Quick Links Section */
.quick-links-container {
    padding: 40px;
    text-align: center;
    background-color: #f8f9fa;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    margin: 30px auto;
    max-width: 95%;
    border: 1px solid #e9ecef;
}

.quick-links-container h2 {
    font-size: 2.2em;
    color: #343a40;
    margin-bottom: 30px;
    border-bottom: 2px solid #007bff;
    padding-bottom: 10px;
    display: inline-block;
}

.quick-links-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 25px;
    text-align: left;
}

.quick-links-column {
    padding: 20px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
    transition: transform 0.2s ease-in-out;
    border: 1px solid #dee2e6;
}

.quick-links-column:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
}

.quick-links-column h3 {
    font-size: 1.4em;
    color: #007bff;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
}

.quick-links-column h3 i {
    margin-right: 10px;
    font-size: 1.2em;
    color: #007bff;
}

.quick-links-column ul {
    list-style: none;
    padding: 0;
}

.quick-links-column ul li {
    font-size: 1em;
    color: #495057;
    margin-bottom: 10px;
    padding-left: 15px;
    position: relative;
}

.quick-links-column ul li::before {
    content: "";
    position: absolute;
    left: 0;
    top: 8px;
    width: 6px;
    height: 6px;
    background-color: #007bff;
    border-radius: 50%;
}

/* Loading spinner */
.loading {
    text-align: center;
    padding: 20px;
    font-size: 1.2em;
    color: #007bff;
}

.error {
    text-align: center;
    padding: 20px;
    font-size: 1.2em;
    color: #dc3545;
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    border-radius: 5px;
    margin: 20px;
}

@media (max-width: 768px) {
    .quick-links-container {
        padding: 30px;
    }

    .quick-links-container h2 {
        font-size: 2em;
        margin-bottom: 20px;
        padding-bottom: 8px;
    }

    .quick-links-grid {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 20px;
    }

    .quick-links-column h3 {
        font-size: 1.2em;
    }

    .quick-links-column ul li {
        font-size: 0.9em;
    }
}
</style>

<body>
<nav id="navbar">
    <div class="logo">
        <h1>Complex Numbers</h1>
    </div>
    <ul class="nav-links">
        <li><a href="home.html">Home</a></li>
        <li><a href="Course.html">Courses</a></li>
        <li><a href="About.html">About</a></li>
        <li><a href="Contact.html">Contact</a></li>
    </ul>
</nav>

<section class="courses" id="quiz-container">
    <h2>Complex Numbers Questions</h2>
    <div id="loading" class="loading">Loading questions...</div>
</section>

<div class="quick-links-container">
    <h2>Quick Links</h2>
    <div class="quick-links-grid">
        <div class="quick-links-column">
            <h3><i class="fas fa-calculator"></i><a href="/Courses/Maths.html" style="color: #007bff;">Maths</a></h3>
            <ul>
                <li><a href="">Probability</a></li>
                <li><a href="">Mensuration</a></li>
                <li><a href="">Number Systems</a></li>
                <li><a href="">Simple Interest</a></li>
            </ul>
        </div>
        <div class="quick-links-column">
            <h3><i class="fas fa-puzzle-piece"></i><a href="" style="color: #007bff;">Logical Reasoning</a></h3>
            <ul class="quick_link">
                <li><a href="">Blood Relations</a></li>
                <li><a href="">Direction Sense Test</a></li>
                <li><a href="">Coding - Decoding</a></li>
                <li><a href="">Syllogism</a></li>
                <li><a href="">Seating Arrangement</a></li>
            </ul>
        </div>
        <div class="quick-links-column">
            <h3><i class="fas fa-book-open"></i><a href="" style="color: #007bff;">Verbal (English)</a></h3>
            <ul class="quick_link">
                <li><a href="">Synonyms & Antonyms</a></li>
                <li><a href="">Reading Comprehension</a></li>
                <li><a href="">Error Spotting</a></li>
                <li><a href="">Sentence Correction</a></li>
                <li><a href="">Para Jumbles</a></li>
            </ul>
        </div>
        <div class="quick-links-column">
            <h3><i class="fas fa-code"></i><a href="" style="color: #007bff;">Data Interpretation & Data Sufficiency</a></h3>
            <ul class="quick_link">
                <li><a href="/Courses/DIDS.html">Data Interpretation</a></li>
                <li><a href="/Courses/DIDS.html">Data Sufficiency</a></li>
            </ul>
        </div>
        <div class="quick-links-column">
            <h3><i class="fas fa-microphone"></i><a href="" style="color: #007bff;">General Knowledge</a></h3>
            <ul class="quick_link">
                <li><a href="">Geography</a></li>
                <li><a href="">Current Affairs</a></li>
                <li><a href="">Indian History</a></li>
                <li><a href="">World History</a></li>
                <li><a href="">Science and Technology</a></li>
            </ul>
        </div>
        <div class="quick-links-column">
            <h3><i class="fas fa-file-alt"></i><a href="" style="color: #007bff;">Technical Aptitude</a></h3>
            <ul class="quick_link">
                <li><a href="">Quantitative Aptitude</a></li>
                <li><a href="">Logical Reasoning</a></li>
                <li><a href="">Verbal Reasoning</a></li>
                <li><a href="">Programming Languages</a></li>
                <li><a href="">Data Structures and Algorithms</a></li>
            </ul>
        </div>
    </div>
</div>

<footer>
    <p>&copy; 2025 LearnMate. All rights reserved.</p>
</footer>

<script>
    // Configuration
    const API_BASE_URL = 'http://localhost:3000';
    const TOPIC = 'Complex Numbers';

    // Utility function to shuffle array (keeping your original implementation)
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // Variable to store fetched quiz data
    let quizData = [];

    const quizContainer = document.getElementById('quiz-container');
    const loadingElement = document.getElementById('loading');

    // Fetch questions from database
    async function fetchQuestions() {
        try {
            loadingElement.textContent = 'Loading questions...';
            
            const response = await fetch(`${API_BASE_URL}/api/questions/${encodeURIComponent(TOPIC)}`);
            const data = await response.json();

            if (!response.ok) {
                throw new Error(data.message || 'Failed to fetch questions');
            }

            if (data.success && data.questions) {

                quizData = data.questions.map(q => ({
                    question: q.question,
                    options: shuffleArray([...q.options]),
                    correctAnswer: q.correctAnswer,
                    explanation: q.explanation
                }));

                loadingElement.style.display = 'none';
                generateQuiz();
            } else {
                throw new Error('No questions found');
            }
        } catch (error) {
            console.error('Error fetching questions:', error);
            loadingElement.innerHTML = `
                <div class="error">
                    <strong>Error loading questions:</strong> ${error.message}
                    <br><br>
                    <small>Please make sure your server is running on ${API_BASE_URL}</small>
                </div>
            `;
        }
    }

    // Your existing generateQuiz function (unchanged)
    function generateQuiz() {
        quizData.forEach((questionData, index) => {
            const questionDiv = document.createElement('div');
            questionDiv.classList.add('course-card');
            questionDiv.id = `question-${index + 1}`;

            const questionTitle = document.createElement('h4');
            questionTitle.textContent = `${index + 1}. ${questionData.question}`;
            questionDiv.appendChild(questionTitle);

            const optionsContainer = document.createElement('div');
            optionsContainer.classList.add('options-container');

            questionData.options.forEach(option => {
                const button = document.createElement('button');
                button.style.color = "white";
                button.style.fontWeight = "bolder";
                button.classList.add('option-btn');
                button.textContent = option;
                button.dataset.correct = (option.trim() == questionData.correctAnswer.trim());
                button.addEventListener('click', function() {
                    checkAnswer(this, questionData.explanation, questionDiv);
                });
                optionsContainer.appendChild(button);
            });
            questionDiv.appendChild(optionsContainer);

            const resultContainer = document.createElement('div');
            resultContainer.classList.add('result-container');
            resultContainer.id = `explanation-${index + 1}`;
            resultContainer.style.display = 'none';
            questionDiv.appendChild(resultContainer);

            quizContainer.appendChild(questionDiv);
        });
    }

    // Your existing checkAnswer function (unchanged)
    function checkAnswer(buttonElement, explanation, questionDiv) {
        const resultDiv = questionDiv.querySelector('.result-container');
        const optionButtons = questionDiv.querySelectorAll('.option-btn');
        const isCorrect = buttonElement.dataset.correct === 'true';

        if (isCorrect) {
            optionButtons.forEach(btn => btn.disabled = true);
            buttonElement.classList.add('correct');
            resultDiv.classList.add('correct-answer');
            resultDiv.innerHTML = `âœ… <strong>Correct Answer!</strong><br><br><em><strong>Explanation:</strong></em> ${explanation}`;
            resultDiv.style.display = 'block';
        } else {
            buttonElement.classList.add('wrong');
        }
    }

    // Initialize the quiz by fetching questions from database
    fetchQuestions();
</script>
</body>
</html>